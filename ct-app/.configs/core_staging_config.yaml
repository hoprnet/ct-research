---
# =============================================================================
# 
# =============================================================================
environment: staging

flags:
  node:
    apply_economic_model: 15s
    ticket_parameters: 1m

    outgoing_channels_balances: 30s

    rotate_subgraphs: 5m

    # through subgraph queries
    peers_rewards: 5m
    registered_nodes: 5m
    
    healthcheck: 15s
    retrieve_peers: 1m
    retrieve_channels: 2m
    retrieve_balances: 5m

    open_channels: 5m
    fund_channels: 5m
    close_old_channels: 5m
    close_pending_channels: 5m
    close_incoming_channels: Off

    get_total_channel_funds: 5m

    observe_message_queue: On
    maintain_sessions: 15s

  peer:
    message_relay_request: On
    
# =============================================================================
# 
# =============================================================================
economic_model:
  min_safe_allowance: "0 wxHOPR"

  legacy:
    proportion: 1.0
    apr: 0.000001

    coefficients:
      a: 1
      b: 1.4
      upperbound: "15 wxHOPR"
      lowerbound: "0.1 wxHOPR"
    
    equations: 
      fx: 
        formula: "a * x"
        condition: "lowerbound <= x <= upperbound"
      gx:
        formula: "a * upperbound + (x - upperbound) ** (1 / b)"
        condition: "x > upperbound"

  sigmoid:
    proportion: 0
    max_apr: 0.0000001
    network_capacity: 100
    total_token_supply: "5000 wxHOPR"

    offset: 10
    buckets:
      economic_security:
        flatness: 1.65
        skewness: 1.50
        upperbound: 0.75
        offset: 0

      network_capacity:
        flatness: 10.0
        skewness: 2.75
        upperbound: 1.0
        offset: 0

# =============================================================================
# 
# =============================================================================
peer:
  minimum_delay_between_batches: 10s
  sleep_mean_time: 10s
  sleep_std_time: 2s
  excluded_peers:
  - "0xcd9d0e23cd999dfc0d1400d837f8e612dbbbdfaa"
  - "0x7220cfe91f369bfe79f883c2891e97407d7a4d48"
  - "0xfe3af421afb84eed445c2b8f1892e3984d3e41ea"
  - "0xc00b7d90463394ec29a080393ff09a2ed82a0f86"

# =============================================================================
# 
# =============================================================================
channel:
  min_balance: "0.05 wxHOPR"
  funding_amount: "0.1 wxHOPR"
  max_age_seconds: 1d

# =============================================================================
#
# =============================================================================
sessions:
  green_destinations:
  - "0xac3c2d1f751d9c763be29aabb20cf31295f3ea27"
  - "0x154a32241dacd34c55ca65c2dfdef173d6d9e7f3"
  - "0x7673daf47ae218d7d9b2fa0e8fc397c2a6940bc1"
  blue_destinations:
  - "0x2eb08c7d673c4b7e8c017471e8d4de996aa82e83"
  - "0x0d3832bf4e8dd5f0ccd996fa2a27e1f864fd91bc"
  - "0xe5ad48d9005f9529da75ded5d931c72bb14b0b19"
  session_retry_base_delay: 2s
  session_retry_max_delay: 60s
  message_worker_count: 10

# =============================================================================
#
# =============================================================================
blokli:
  url: ""
  token: ""
  
# =============================================================================
# 
# =============================================================================
subgraph:
  type: auto # auto | default | backup
  user_id: 78696
  api_key: 

  rewards:
    query_id: GoJ4KRuYEcELQk42hir2tjau6r1u4ibDFY6t1zH6zpKk
    slug: hopr-channels
  safes_balance:
    query_id: GmbJTpa1o4baeStDT48TfQu4ditJmQwwXYPG1DvEiufB
    slug: hopr-nodes-rotsee
...
